# キャンプ場予約監視システム - GASセットアップガイド

ヒルビリーキャンプ場＋TENKU BASE 奥武蔵の予約状況を自動監視し、Discordに通知するシステム。

## ファイル構成（効率的管理）

1つのGASプロジェクトで3つのファイルを管理：

- **config.gs** - 共通設定（WEBHOOK_URL）
- **hillbilly.gs** - ヒルビリーキャンプ場監視
- **tenku-base.gs** - TENKU BASE監視

## セットアップ手順

### 1. GASプロジェクト作成

1. https://script.google.com/ にアクセス
2. 「新しいプロジェクト」をクリック
3. プロジェクト名を設定（例：キャンプ場予約監視）

### 2. ファイル追加

**既存の「コード.gs」を削除：**
- 左側のファイル一覧で「コード.gs」の右の「︙」→「削除」

**3つのファイルを追加：**

#### 2-1. config.gs
- 「ファイル」→「新規」→「スクリプト」
- ファイル名：`config`
- 内容：`gas-config.gs`の内容をコピペ

#### 2-2. hillbilly.gs
- 「ファイル」→「新規」→「スクリプト」
- ファイル名：`hillbilly`
- 内容：`gas-hillbilly.gs`の内容をコピペ

#### 2-3. tenku-base.gs
- 「ファイル」→「新規」→「スクリプト」
- ファイル名：`tenku-base`
- 内容：`gas-tenku-base.gs`の内容をコピペ

### 3. トリガー設定

左メニューの「トリガー」をクリック：

#### ヒルビリー用トリガー
- 「トリガーを追加」
- 実行する関数：`checkHillbillyAvailability`
- イベントのソース：`時間主導型`
- 時間ベースのトリガー：`時間ベースのタイマー`
- 時間の間隔：`5分おき` or `10分おき`

#### TENKU BASE用トリガー
- 「トリガーを追加」
- 実行する関数：`checkTenkuBase`
- イベントのソース：`時間主導型`
- 時間ベースのトリガー：`日タイマー`
- 時刻：朝7時〜8時

### 4. 初回実行テスト

#### ヒルビリーのテスト
1. 関数リストから`checkHillbillyAvailability`を選択
2. 「実行」ボタンをクリック
3. 権限承認を求められたら承認
4. ログを確認（「実行数」タブ）

#### TENKU BASEのテスト
1. 関数リストから`checkTenkuBase`を選択
2. 「実行」ボタンをクリック
3. Discordに通知が来るか確認

## 管理のメリット

### 1つのプロジェクトで管理：
- トリガーが1箇所で管理できる
- ログも統合して確認できる
- Webhook URLの変更が1箇所でOK

### ファイル分離：
- 各スクリプトが独立して動く
- 片方のエラーが他方に影響しない
- メンテナンスが楽

## トラブルシューティング

### 重複エラーが出る
- ファイルが正しく分かれているか確認
- `WEBHOOK_URL`が`config.gs`にしかないか確認

### 通知が来ない
- トリガーが設定されているか確認
- ログでエラーがないか確認
- Webhook URLが正しいか確認

### TENKU BASEで差分チェックをリセット
- 「プロジェクトの設定」→「スクリプトプロパティ」
- `TENKU_LAST_RESULTS`を削除

## Webhook URL変更

`config.gs`の`WEBHOOK_URL`を変更するだけでOK（全ファイルに反映）

## 注意事項

- GASの実行回数制限に注意（無料アカウント：1日90分まで）
- ヒルビリーを5分おきにすると負荷高め（10分推奨）
- TENKU BASEは1日1回チェックで十分
