# 2026-01-26

## セキュリティ強化作業

### 実施した対策
- allowlist設定（かっぴーのみアクセス可能）
- 機密ファイルアクセス時の二要素認証追加（TOOLS.md）
  - 質問：「初めて飼ったペットは何？名前も教えて」
  - 答え：犬、りん
- Gateway設定確認：bind=loopback（localhost限定）✅
- 設定ファイルのusers形式修正（オブジェクト→配列）

## モデル設定変更の経緯
1. 最初：Claude Opus 4.5（セキュリティ優先）
2. Ollamaを試そうとしたが、8Bモデルはセキュリティ警告が出た
3. 結局Ollamaアンインストール
4. 最終：**Claude Sonnet 4.5** をデフォルトに設定

## 現在の最終設定
- **デフォルトモデル**: Claude Sonnet 4.5
- **コーディング時**: Claude Opus 4.5（自動切替ルール - TOOLS.mdに記載）
- **画像生成**: Gemini
- **フォールバック**: Claude Opus 4.5
- **セキュリティ**: 最高水準達成

## TOOLS.mdに追加したルール
コーディング・アプリ開発タスク時は自動的にOpus 4.5に切り替える

## 削除したもの
- Ollama (brew uninstall + ~/.ollama削除)
- Ollama設定（clawdbot.json + models.json）
- Minimax（元々インストールなし）

## トークン最適化
### ハートビート設定変更
- 圧縮閾値：150k → 100kに変更
- 活動時間のみ実行（9:00-23:00）
- 夜間（23:00-9:00）スキップでトークン節約

### プロジェクトファイル削減
- BOOTSTRAP.md削除（257語）
- AGENTS.md短縮（1,239語 → 479語、61%減）
- **合計削減：約1,350トークン/回**

## りんちゃんLP作成 🐕

### 作成物
黒い柴犬「りんちゃん」のランディングページ完成

**場所**: `rin-lp/`

**ファイル構成**:
- `index.html` (6.9KB) - メインHTML
- `style.css` (8.8KB) - モダンなスタイルシート
- `script.js` (5.6KB) - インタラクティブ機能
- `README.md` (4.7KB) - 使い方とカスタマイズガイド

**総行数**: 840行

### デザイン特徴
- **配色**: 黒ベース（柴犬の毛色）＋オレンジアクセント
- **レスポンシブ**: スマホ・タブレット・PC対応
- **アニメーション**: スクロールトリガー、パララックス効果
- **セクション**: ヒーロー、プロフィール、魅力、ギャラリー、一日の流れ

### 技術仕様
- Pure HTML/CSS/JS（フレームワーク不要）
- CSS Grid/Flexbox
- Intersection Observer（効率的アニメーション）
- スムーススクロール
- 進捗バー
- トップへ戻るボタン

### 開き方
```bash
open rin-lp/index.html
# または
cd rin-lp && python3 -m http.server 8000
```

### カスタマイズ可能
- 実際の写真追加
- 色変更（CSS Variables）
- セクション追加
- お問い合わせフォーム等

## Cron設定
### daily-log-save
- 毎日深夜0時に自動実行
- セッション履歴を整理して`memory/YYYY-MM-DD.md`に保存
- 重要な決定事項や学んだことを記録
- 次回作業に役立つ情報を重視

## 朝のタスク（8:00頃）
- 月曜日のAI・ECニュースまとめタスク実行試行
- **結果**: Brave Search APIキー未設定のため実行不可
- **今後の対応**: かっぴーにAPIキー設定を依頼
  - 取得先: https://api.search.brave.com/app/keys
  - 設定方法: `clawdbot configure --section web` または環境変数 `BRAVE_API_KEY`

## 技術メモ
- プロンプトインジェクションについて説明
- Opus 4.5がSonnetより耐性が高い理由
- Gateway bind設定の重要性（loopback vs all）
- X APIは有料化済み（Basic: $100/月）
- Brave Search API設定が必要（web検索機能）
