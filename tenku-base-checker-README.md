# TENKU BASE 予約状況チェッカー

TENKU CAMP BASE 奥武蔵の予約状況から、M/Lサイズ（車が入る）の空き状況をDiscordに通知するGASスクリプト。

## 対象サイト

- ラM (ライトフォレストM)
- ラL (ライトフォレストL)
- フM (フォレストM)
- 天L (天空L)
- 新ラ (新エリア・ライトフォレストL)
- 新天L (新エリア・天空L)
- 新天L極 (新エリア・天空L極み)

## 機能

- **M/Lサイズの空き状況を自動チェック**
- **差分検知**: 前回から変更がない場合は通知しない（無駄な通知を防止）
- **Discord webhook通知**

## セットアップ

1. **Google Apps Scriptを開く**
   - https://script.google.com/ にアクセス
   - 「新しいプロジェクト」をクリック

2. **スクリプトをコピー**
   - `tenku-base-checker.gs` の内容を全てコピペ

3. **トリガーを設定**（お前がやる）
   - 左メニューの「トリガー」をクリック
   - 「トリガーを追加」
   - 実行する関数: `checkTenkuBase`
   - イベントのソース: `時間主導型`
   - 時間ベースのトリガー: `日タイマー` or `時間ベースのタイマー`
   - 時刻: 好きな時間（例: 朝7時）

4. **初回実行テスト**
   - `checkTenkuBase` 関数を選択
   - 「実行」ボタンをクリック
   - 権限の承認を求められたら承認
   - Discordに通知が来るか確認

## 通知例

```
🏕️ TENKU BASE - M/Lサイト空き情報
M/Lサイズ（車が入る）の空き状況だぜ

📅 2/6 - 全体的に余裕あり
ラM, ラL, フM, 天L, 新ラ, 新天L

📅 2/14 - 7サイト空き
ラM, フM, 新ラ, 新天L

最終チェック: 2026/2/3 18:34:00
```

## カスタマイズ

### チェック頻度を変更
- トリガー設定で「時間ベースのタイマー」を変更
  - 1時間ごと、4時間ごと、毎日など

### 対象サイトを変更
- `TARGET_SITES` 配列を編集

### Webhook URLを変更
- `WEBHOOK_URL` を編集

## トラブルシューティング

### 通知が来ない
- GASの「実行数」を確認（トリガーが動いているか）
- ログを確認（「表示」→「ログ」）
- Webhook URLが正しいか確認
- **前回から変更がない場合は通知されない**（差分チェック機能）
  - 強制的に通知したい場合: スクリプトプロパティ「LAST_RESULTS」を削除して再実行

### 空き状況が正しく取得できない
- Googleフォームのページ構造が変わった可能性
- ログでHTMLの取得状況を確認

### エラー通知が来る
- スクリプトに問題がある可能性
- エラー内容をチェック

### 差分チェックをリセットしたい
- 「プロジェクトの設定」→「スクリプトプロパティ」
- 「LAST_RESULTS」を削除
- 次回実行時に通知が来る

## 注意事項

- Googleフォームのページ構造が変わると動かなくなる可能性あり
- あくまで参考情報。実際の予約前に公式ページを確認すること
- タイムラグで満サイトになっている可能性あり
