# HEARTBEAT.md

## 活動時間チェック（トークン節約）

**活動時間外（23:00-9:00）：** HEARTBEAT_OK で即終了

**活動時間内（9:00-23:00）のみ実行：**

## トークン監視タスク

1. **session_status でトークン数をチェック**

2. **400,000トークン（40%）を超えていたら：**
   - 加藤様に「⚠️ コンテキストウィンドウが40%超えたぜ（現在: X,XXX,XXXトークン）」と通知
   - その後も継続してチェック

3. **100,000トークンを超えていたら：**
   - 今日の会話の要約を `memory/YYYY-MM-DD.md` に保存
   - 重要な決定事項、作ったもの、設定変更などを記録
   - 加藤様に「📝 トークン上限に近づいたためメモリ保存＆圧縮します」と報告
   - `/compact` でコンテキスト圧縮を実行

4. **それ以下なら：** 以下の「プロアクティブ提案タスク」へ進む

## 💡 プロアクティブ提案タスク

トークンに余裕があるとき、以下を考えて提案する：

1. **改善案・新アイデア**
   - 今の運用フロー、cronジョブ、スキルなどで改善できそうなことがあれば提案
   - 最近のトレンド（AI・EC関連）で使えそうなものがあれば共有

2. **作りたいツール**
   - かっぴーの作業を楽にするツールやスクリプトを思いついたら報告
   - 「こういうの作ったら便利じゃない？」レベルでOK

3. **自動化提案**
   - かっぴーの最近の活動（メッセージ、作業パターン）を振り返る
   - 「それ自動化できそう」と思ったら具体的に提案

**ルール：**
- 毎回全部やらなくていい。1つでもあれば提案する
- 何もなければ HEARTBEAT_OK
- 提案は簡潔に。長文禁止
- <@1395009129755443260> にメンション付きで提案

## 注意
- 保存前に必ずメモリに書き出すこと
- 圧縮後は古い会話が要約されるので重要情報は必ずメモリに保存
- 夜間（23:00-9:00）はスキップしてトークン節約
